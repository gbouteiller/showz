---
import { api } from "@showz/convex/api";
import { Button } from "@showz/ui/components/button";
import RootLayout from "../_layout.astro";
import { SignOutButton } from "./_signout";
import { AdminUser } from "./_user";

const token = await Astro.locals.auth.getToken();
const preloaded = await Astro.locals.convex.preloadQuery(api.pages.admin, {}, { token });
---

<RootLayout>
  <div class="flex items-center justify-center min-h-svh">
    <div class="flex flex-col items-center justify-center gap-4">
      <AdminUser client:load preloaded={preloaded} />
      <SignOutButton client:load />
      <Button variant="link" className="cursor-pointer">
        <a href="/">Go to Home</a>
      </Button>
    </div>
  </div>
</RootLayout>
